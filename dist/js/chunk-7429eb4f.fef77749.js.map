{"version":3,"sources":["webpack:///./src/views/components/me-top/index.vue?bbc9","webpack:///./src/views/music/music.vue?c20c","webpack:///./src/views/components/me-top/index.vue?73e1","webpack:///src/views/components/me-top/index.vue","webpack:///./src/views/components/me-top/index.vue?d915","webpack:///./src/views/components/me-top/index.vue","webpack:///./src/views/music/ddPlayer.js","webpack:///src/views/music/music.vue","webpack:///./src/views/music/music.vue?5b16","webpack:///./src/views/music/music.vue","webpack:///./src/utils/util.js","webpack:///./src/assets/image/bg.jpg","webpack:///./src/views/music/music.vue?9d35"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","$route","meta","_e","attrs","aniName","style","backgroundImage","picUrl","staticRenderFns","on","goback","_v","_s","title","methods","component","ddPlayerMusic","initAudio","that","ele","audioEle","onprogress","buffered","length","duration","currentMusic","end","currentProgress","setCurrentProgress","e","onplay","timer","clearTimeout","setTimeout","musicReady","ontimeupdate","setCurrentTime","currentTime","onended","mode","loop","nextSong","onerror","onstalled","load","setPlaying","oncanplay","async","list","historyListt","filter","item","id","push","setHistorylist","ddPlayer","image","newMusic","oldMusic","src","url","setLyricIndex","$nextTick","_getLyric","newPlaying","audio","newTime","nolyric","lyricIndexx","i","lyric","time","playing","setCurrentIndex","index","setNolyric","setLyric","setIsMute","setLastvolumn","addZero","s","timeExp","parseLyric","lrc","lines","split","line","result","exec","text","replace","trim","format","value","minute","Math","floor","second","isPromise","v","undefined","then","silencePromise","module","exports"],"mappings":"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","file":"js/chunk-7429eb4f.fef77749.js","sourcesContent":["import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2b519bf0&scoped=scoped&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2b519bf0&scoped=scoped&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music_page\"},[(_vm.$route.meta.showTop)?_c('me-top'):_vm._e(),_c('div',{staticClass:\"child_page\"},[_c('transition',{attrs:{\"name\":_vm.$route.meta.aniName}},[_c('router-view',{staticClass:\"item_page\",attrs:{\"wechat-title\":\"\"}})],1)],1),_c('div',{staticClass:\"dd_bg_pic\",style:({ backgroundImage: _vm.picUrl })}),_c('div',{staticClass:\"dd_bg_mask\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"me_top\"},[_c('van-icon',{attrs:{\"name\":\"arrow-left\",\"color\":\"hsla(0,0%,100%,.7)\"},on:{\"click\":_vm.goback}}),_c('div',[_vm._v(_vm._s(_vm.title))]),_c('van-icon',{attrs:{\"name\":\"search\",\"color\":\"hsla(0,0%,100%,.7)\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"me_top\">\r\n\t\t<van-icon name=\"arrow-left\" color=\"hsla(0,0%,100%,.7)\" @click=\"goback\" />\r\n\t\t<div>{{title}}</div>\r\n\t\t<van-icon name=\"search\" color=\"hsla(0,0%,100%,.7)\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n\tdata () {\r\n\t\treturn {\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n  \t...mapGetters(['currentMusic']),\r\n\r\n  \ttitle () {\r\n  \t\treturn this.$route.path == '/music/lyric' ? \r\n  \t\t\t(this.currentMusic && this.currentMusic.name ? this.currentMusic.name : this.$route.meta.title) :\r\n  \t\t\tthis.$route.meta.title\r\n  \t}\r\n  },\r\n\r\n  mounted () {\r\n  \tconsole.log(this.$route)\r\n  },\r\n\r\n  methods: {\r\n  \tgoback () {\r\n  \t\thistory.go(-1)\r\n  \t}\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.me_top{\r\n\t\theight: 40px;\r\n\t\tpadding: 0 10px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2b519bf0&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2b519bf0&scoped=scoped&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b519bf0\",\n  null\n  \n)\n\nexport default component.exports","const ddPlayerMusic = {\r\n  initAudio(that) {\r\n    const ele = that.audioEle\r\n    // 音频缓冲事件\r\n    ele.onprogress = () => {\r\n      try {\r\n        if (ele.buffered.length > 0) {\r\n          const duration = that.currentMusic.duration\r\n          let buffered = 0\r\n          ele.buffered.end(0)\r\n          buffered =\r\n            ele.buffered.end(0) > duration ? duration : ele.buffered.end(0)\r\n          let currentProgress = buffered / duration\r\n          that.setCurrentProgress(currentProgress)\r\n        }\r\n      } catch (e) {}\r\n    }\r\n    // 开始播放音乐\r\n    ele.onplay = () => {\r\n      let timer\r\n      clearTimeout(timer)\r\n      timer = setTimeout(() => {\r\n        that.musicReady = true // 是否可以使用播放器\r\n      }, 100)\r\n    }\r\n    // 获取当前播放时间\r\n    ele.ontimeupdate = () => {\r\n      that.setCurrentTime(ele.currentTime)\r\n    }\r\n    // 当前音乐播放完毕\r\n    ele.onended = () => {\r\n      if (that.mode == 'loop') { // 单曲循环\r\n        that.loop()\r\n      } else {\r\n        that.nextSong()\r\n      }\r\n    }\r\n    // 音乐播放出错\r\n    ele.onerror = () => {\r\n      that.nextSong()\r\n      // console.log('播放出错啦！')\r\n    }\r\n    // 音乐进度拖动大于加载时重载音乐\r\n    ele.onstalled = () => {\r\n      ele.load()\r\n      that.setPlaying(false)\r\n      let timer\r\n      clearTimeout(timer)\r\n      timer = setTimeout(() => {\r\n      \tthat.setPlaying(true)\r\n      }, 10)\r\n    }\r\n    // 将能播放的音乐加入播放历史\r\n    ele.oncanplay = async () => {\r\n    \tlet list = that.historyListt.filter(item => item.id == that.currentMusic.id)\r\n    \tif (list.length == 0) { // 历史记录里有的，不用再次添加\r\n    \t\tthat.historyListt.push(that.currentMusic)\r\n    \t\tthat.setHistorylist(that.historyListt)\r\n    \t}\r\n    }\r\n  }\r\n}\r\n\r\nexport default ddPlayerMusic\r\n","<template>\r\n\t<div class=\"music_page\">\r\n\t\t<!--顶部-->\r\n\t\t<me-top v-if=\"$route.meta.showTop\"></me-top>\r\n\r\n\t\t<!--列表-->\r\n\t\t<div class=\"child_page\">\r\n\t\t\t<transition :name=\"$route.meta.aniName\">\r\n\t\t\t\t<router-view class=\"item_page\" wechat-title></router-view>\r\n\t\t\t</transition>\r\n\t\t</div>\r\n\r\n\t\t<!--背景设置-->\r\n\t\t<div class=\"dd_bg_pic\" :style=\"{ backgroundImage: picUrl }\"></div>\r\n    <div class=\"dd_bg_mask\"></div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport meTop from '../components/me-top'\r\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\r\nimport { silencePromise, parseLyric } from '@/utils/util'\r\nimport ddPlayerMusic from './ddPlayer.js'\r\nexport default {\r\n\tcomponents: {\r\n\t\tmeTop\r\n\t},\r\n\r\n\tdata () {\r\n\t\treturn {\r\n\t\t}\r\n\t},\r\n\r\n\tmounted () {\r\n\t\tthis.$nextTick(() => {\r\n      ddPlayerMusic.initAudio(this)\r\n    \tthis.audioEle.volume = this.isMute ? 0 : this.volume\r\n    })\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tpicUrl() {\r\n      return this.currentMusic.id && this.currentMusic.image\r\n      \t? `url(${this.currentMusic.image}?param=300y300)`\r\n      \t: \"url(\"+require('../../assets/image/bg.jpg')+\")\"\r\n    },\r\n\r\n    ...mapGetters([ 'audioEle', 'playlist', 'currentIndex', 'currentMusic', 'currentTime',\r\n    \t'playing', 'mode', 'historyList', 'lyric', 'nolyric', 'volume', 'isMute', 'lastVolumn' ]),\r\n\r\n    historyListt: {\r\n    \tget() {\r\n    \t\treturn this.historyList\r\n    \t},\r\n    \tset() {}\r\n    }\r\n\t},\r\n\r\n\twatch: {\r\n\t\tcurrentMusic(newMusic, oldMusic) { // 监听当前播放音乐\r\n      if (!newMusic.id) {\r\n      \tthis.setLyric([])\r\n        return\r\n      }\r\n      if (newMusic.id === oldMusic.id) {\r\n        return\r\n      }\r\n      this.audioEle.src = newMusic.url\r\n      // 重置相关参数\r\n      this.setLyricIndex(0)\r\n      this.setCurrentProgress(0)\r\n      silencePromise(this.audioEle.play())\r\n      this.$nextTick(() => {\r\n        this._getLyric(newMusic.id)\r\n      })\r\n    },\r\n\r\n    playing(newPlaying) { // 监听播放暂停\r\n      const audio = this.audioEle\r\n      this.$nextTick(() => {\r\n        newPlaying ? silencePromise(audio.play()) : audio.pause()\r\n      })\r\n    },\r\n\r\n    currentTime(newTime) { // 监听当前播放时间\r\n      if (this.nolyric) {\r\n        return\r\n      }\r\n      let lyricIndexx = 0\r\n      for (let i = 0; i < this.lyric.length; i++) {\r\n        if (newTime > this.lyric[i].time) {\r\n          lyricIndexx = i\r\n        }\r\n      }\r\n      this.setLyricIndex(lyricIndexx)\r\n    },\r\n\r\n    volume (newVolume) { // 音量变化\r\n    \tlet isMutue = newVolume == 0 ? true : false\r\n    \tthis.setIsMute(isMutue)\r\n    \tthis.audioEle.volume = newVolume\r\n    },\r\n\r\n    isMute (newMute) { // 是否静音变化\r\n    \tif (newMute) { // 静音\r\n    \t\tthis.setLastvolumn(this.volume) // 静音前音量\r\n    \t\tthis.setVolume(0)\r\n    \t} else {\r\n    \t\tthis.setVolume(this.lastVolumn)\r\n    \t}\r\n    }\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync _getLyric (id) { // 获取歌词\r\n    \tlet param = { id }\r\n    \tawait this.$get(this.$api.music_lyric, param).then(async data => {\r\n    \t\tif (data.body.nolyric) {\r\n\t\t    \tthis.setNolyric(true)\r\n\t\t    } else {\r\n\t\t    \tthis.setNolyric(false)\r\n\t        let lyricc = await parseLyric(data.body.lrc.lyric)\r\n\t        this.setLyric(lyricc)\r\n\t\t    }\r\n\t\t    silencePromise(this.audioEle.play())\r\n\t    })\r\n    },\r\n\r\n    nextSong () { // 下一曲\r\n    \tif (this.playlist.length === 1) { // 播放列表只有一首歌曲，循环播放\r\n        this.loop()\r\n      } else {\r\n      \tlet index = ''\r\n      \tif (this.mode === 'listLoop') { // 列表循环\r\n      \t\tindex = this.currentIndex + 1\r\n\t        if (index === this.playlist.length) {\r\n\t          index = 0\r\n\t        }\r\n      \t} else if (this.mode === 'random') { // 随机播放\r\n      \t\tindex = Math.floor(Math.random() * (this.playlist.length))\r\n      \t}\r\n        if (!this.playing) { // 暂停状态\r\n          this.setPlaying(true)\r\n        }\r\n        this.setCurrentIndex(index)\r\n      }\r\n    },\r\n\r\n    pause () { // 暂停\r\n    \tthis.playing = !this.playing\r\n\t\t\tthis.setPlaying(this.playing)\r\n    },\r\n\r\n    loop () { // 循环，再次播放本歌曲\r\n      this.audioEle.currentTime = 0\r\n      silencePromise(this.audioEle.play())\r\n      this.setPlaying(true)\r\n      if (this.lyric.length > 0) {\r\n        this.setLyricIndex(0)\r\n      }\r\n    },\r\n\r\n\t\t...mapMutations({\r\n      setPlaying: 'SET_PLAYING',\r\n      setCurrentIndex: 'SET_CURRENTINDEX',\r\n      setCurrentTime: 'SET_CURRENTTIME',\r\n      setCurrentProgress: 'SET_CURRENTPROGRESS',\r\n      setNolyric: 'SET_NOLYRIC',\r\n      setLyric: 'SET_LYRIC',\r\n      setLyricIndex: 'SET_LYRICINDEX',\r\n      setIsMute: 'SET_ISMUTE',\r\n      setLastvolumn: 'SET_LASTVOLUMN'\r\n    }),\r\n\r\n    ...mapActions(['setHistorylist', 'setVolume'])\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped=\"scoped\" lang=\"less\">\r\n\t.music_page{\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column;\r\n\t\tjustify-content: space-between;\r\n\t\t.child_page{\r\n\t\t\tflex: 1;\r\n\t\t\toverflow-y: auto;\r\n\t\t\tposition: relative;\r\n\t    overflow: hidden;\r\n\t    color: rgba(255, 255, 255, .9);\r\n\t    perspective: 1200px;\r\n\t    .item_page {\r\n\t\t    position: absolute;\r\n\t\t    top: 0;\r\n\t\t    left: 0;\r\n\t\t    bottom: 0;\r\n\t\t    right: 0;\r\n\t\t    overflow: hidden;\r\n\t\t    backface-visibility: hidden;\r\n\t\t    transform: translate3d(0, 0, 0);\r\n\t\t    transform-style: preserve-3d;\r\n\t\t    visibility: visible;\r\n\t\t  }\r\n\t\t}\r\n\t}\r\n\r\n\t/*背景*/\r\n\t.dd_bg_pic, .dd_bg_mask{\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: -2;\r\n\t}\r\n\t.dd_bg_pic{\r\n\t\tz-index: -2;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: 50%;\r\n\t\ttransition: all 0.8s;\r\n\t\t-webkit-transition: all 0.8s;\r\n\t\tfilter: blur(7px);\r\n\t\t-webkit-filter: blur(7px);\r\n\t\topacity: .8;\r\n\t}\r\n\t.dd_bg_mask{\r\n\t\topacity: .5;\r\n\t\tfilter: none;\r\n\t\tbackground-color: rgba(46, 48, 48, 1);\r\n\t}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./music.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./music.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music.vue?vue&type=template&id=312f8e32&scoped=true&\"\nimport script from \"./music.vue?vue&type=script&lang=js&\"\nexport * from \"./music.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music.vue?vue&type=style&index=0&id=312f8e32&scoped=scoped&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"312f8e32\",\n  null\n  \n)\n\nexport default component.exports","// 随机排序数组/洗牌函数 https://github.com/lodash/lodash/blob/master/shuffle.js\r\nfunction copyArray(source, array) {\r\n  let index = -1\r\n  const length = source.length\r\n  array || (array = new Array(length))\r\n  while (++index < length) {\r\n    array[index] = source[index]\r\n  }\r\n  return array\r\n}\r\n\r\nexport const randomSortArray = function shuffle(array) {\r\n  const length = array == null ? 0 : array.length\r\n  if (!length) {\r\n    return []\r\n  }\r\n  let index = -1\r\n  const lastIndex = length - 1\r\n  const result = copyArray(array)\r\n  while (++index < length) {\r\n    const rand = index + Math.floor(Math.random() * (lastIndex - index + 1))\r\n    const value = result[rand]\r\n    result[rand] = result[index]\r\n    result[index] = value\r\n  }\r\n  return result\r\n}\r\n\r\n// 防抖函数\r\nexport function debounce(func, delay) {\r\n  let timer\r\n  return function(...args) {\r\n    if (timer) {\r\n      clearTimeout(timer)\r\n    }\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args)\r\n    }, delay)\r\n  }\r\n}\r\n\r\n// 补0函数\r\nexport function addZero(s) {\r\n  return s < 10 ? '0' + s : s\r\n}\r\n\r\n// 歌词解析\r\nconst timeExp = /\\[(\\d{2,}):(\\d{2})(?:\\.(\\d{2,3}))?]/g\r\nexport function parseLyric(lrc) {\r\n  const lines = lrc.split('\\n')\r\n  const lyric = []\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const line = lines[i]\r\n    const result = timeExp.exec(line)\r\n    if (!result) {\r\n      continue\r\n    }\r\n    const text = line.replace(timeExp, '').trim()\r\n    if (text) {\r\n      lyric.push({\r\n        time: (result[1] * 6e4 + result[2] * 1e3 + (result[3] || 0) * 1) / 1e3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n  return lyric\r\n}\r\n\r\n// 时间格式化\r\nexport function format(value) {\r\n  let minute = Math.floor(value / 60)\r\n  let second = Math.floor(value % 60)\r\n  return `${addZero(minute)}:${addZero(second)}`\r\n}\r\n\r\n/**\r\n * https://github.com/videojs/video.js/blob/master/src/js/utils/promise.js\r\n * Silence a Promise-like object.\r\n *\r\n * This is useful for avoiding non-harmful, but potentially confusing \"uncaught\r\n * play promise\" rejection error messages.\r\n *\r\n * @param  {Object} value\r\n *         An object that may or may not be `Promise`-like.\r\n */\r\nexport function isPromise(v) {\r\n  return v !== undefined && v !== null && typeof v.then === 'function'\r\n}\r\n\r\nexport function silencePromise(value) {\r\n  if (isPromise(value)) {\r\n    value.then(null, () => {})\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"img/bg.d681d4ef.jpg\";","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./music.vue?vue&type=style&index=0&id=312f8e32&scoped=scoped&lang=less&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.5.3@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./music.vue?vue&type=style&index=0&id=312f8e32&scoped=scoped&lang=less&\""],"sourceRoot":""}